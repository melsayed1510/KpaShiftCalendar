<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>KPA Shift Calendar System</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet">
<link rel="icon" type="image/x-icon" href="favicon.ico">

<style>

/* ========= GENERAL ========= */

body{
    font-family:'Cairo';
    background:#f4f6f9;
    margin:0;
}

/* ========= HEADER ========= */

.mainHeader{
    background:white;
    padding:10px 25px;
    box-shadow:0 2px 12px rgba(0,0,0,.08);
    display:flex;
    justify-content:space-between;
    align-items:center;
}

/* ========= TOGGLE ========= */

.toggleContainer{
    position:relative;
    display:flex;
    background:#eef2f7;
    border-radius:40px;
    padding:5px;
    width:280px;
    height:48px;
}

.toggleSlider{
    position:absolute;
    top:5px;
    left:140px; /* الشهري افتراضي */
    width:135px;
    height:38px;
    background:#1F5FA8;
    border-radius:30px;
    transition:.3s ease;
}

.toggleBtn{
    flex:1;
    border:none;
    background:transparent;
    font-weight:700;
    z-index:2;
    cursor:pointer;
    transition:.3s;
}

.toggleBtn.active{
    color:white;
}

/* ========= FRAME ========= */

.systemWrapper{
    width:100%;
    height:calc(100vh - 80px);
}

.systemFrame{
    width:100%;
    height:100%;
    border:none;
}

</style>
</head>

<body>

<!-- ========= HEADER ========= -->

<div class="mainHeader" dir="ltr">

    <!-- Language -->
    <select id="globalLang" class="form-select w-auto">
        <option value="ar">العربية</option>
        <option value="en">English</option>
    </select>

    <!-- Toggle -->
    <div class="toggleContainer">
        <div class="toggleSlider" id="toggleSlider"></div>

        <!-- السنوي -->
        <button class="toggleBtn" id="annualBtn">التقويم السنوي</button>

        <!-- الشهري -->
        <button class="toggleBtn active" id="monthlyBtn">التقويم الشهري</button>
    </div>

</div>

<!-- ========= SYSTEM CONTENT ========= -->

<div class="systemWrapper">
    <iframe id="systemFrame" class="systemFrame"></iframe>
</div>

<script>

/* ========= ELEMENTS ========= */

const monthlyBtn = document.getElementById("monthlyBtn");
const annualBtn  = document.getElementById("annualBtn");
const slider     = document.getElementById("toggleSlider");
const frame      = document.getElementById("systemFrame");
const globalLang = document.getElementById("globalLang");

/* ========= LOAD SYSTEM ========= */

function loadSystem(page){
    const lang = globalLang.value;
    frame.src = page + "?lang=" + lang;
}

/* ========= DEFAULT LOAD ========= */

loadSystem("Month.html");

/* ========= SWITCHING ========= */

monthlyBtn.addEventListener("click", function(){

    slider.style.left = "140px";
    monthlyBtn.classList.add("active");
    annualBtn.classList.remove("active");

    loadSystem("Month.html");

});

annualBtn.addEventListener("click", function(){

    slider.style.left = "5px";
    annualBtn.classList.add("active");
    monthlyBtn.classList.remove("active");

    loadSystem("Year.html");

});

/* ========= LANGUAGE ========= */

globalLang.addEventListener("change", function(){

    const lang = this.value;

    document.documentElement.dir = (lang === "ar") ? "rtl" : "ltr";

    monthlyBtn.innerText =
        lang === "ar" ? "التقويم الشهري" : "Monthly Calendar";

    annualBtn.innerText =
        lang === "ar" ? "التقويم السنوي" : "Annual Calendar";

    // إعادة تحميل الصفحة داخل iframe باللغة الجديدة
    const currentPage = frame.src.includes("Year")
        ? "Year.html"
        : "Month.html";

    loadSystem(currentPage);

});

</script>

</body>
</html>

